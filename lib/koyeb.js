const _0x236778=_0x5365;(function(_0x369e06,_0x1bec6d){const _0x1c85da=_0x5365,_0x189aab=_0x369e06();while(!![]){try{const _0x18c7a=parseInt(_0x1c85da(0x1e3))/0x1+parseInt(_0x1c85da(0x1f0))/0x2+parseInt(_0x1c85da(0x1ef))/0x3*(parseInt(_0x1c85da(0x1ff))/0x4)+parseInt(_0x1c85da(0x1e4))/0x5*(-parseInt(_0x1c85da(0x1ea))/0x6)+parseInt(_0x1c85da(0x20a))/0x7*(parseInt(_0x1c85da(0x1f5))/0x8)+-parseInt(_0x1c85da(0x1fd))/0x9+parseInt(_0x1c85da(0x208))/0xa*(-parseInt(_0x1c85da(0x1df))/0xb);if(_0x18c7a===_0x1bec6d)break;else _0x189aab['push'](_0x189aab['shift']());}catch(_0x23d5c6){_0x189aab['push'](_0x189aab['shift']());}}}(_0x5d88,0xa4580));function _0x5d88(){const _0x1a46a3=['get','170xcCHDn','*\x20:\x20_','77CNMqHk','region:fra','env','data','push','split','\x20var\x20from\x20koyeb._','join','_No\x20such\x20env\x20in\x20koyeb._','true','post','definition','includes','412555QexvaA','ERRPRING','\x20._','status','233302hitBxu','585KyPNPf','_Successfully\x20deleted\x20','instance_types','deployments','name','services','56340vyKCQa','STOPPED','Bearer\x20','scalings','https://app.koyeb.com/v1/deployments','3xhbIXa','916280GYclKX','KOYEB_API','deployment','_Please\x20put\x20Koyeb\x20api\x20key\x20in\x20var\x20KOYEB_API._\x0aEg:\x20KOYEB_API:api\x20key','patch','637496XVHFIR','Successfuly\x20changed\x20var\x20_','https://app.koyeb.com/v1/deployments/','git','_update\x20started._','key','then','axios','2633967IvQRFj','value','4536124nBHjMN','latest_deployment_id','https://app.koyeb.com/v1/services/','length','https://app.koyeb.com/v1/services','health_checks','routes','ERROR'];_0x5d88=function(){return _0x1a46a3;};return _0x5d88();}const axios=require(_0x236778(0x1fc));let koyeb_api=process['env'][_0x236778(0x1f1)],axiosConfig={'headers':{'Content-Type':'application/json;charset=UTF-8','Authorization':_0x236778(0x1ec)+koyeb_api}};async function get_deployments(){const _0x53d277=_0x236778;status=![];let _0x1ed3f3={'headers':{'Content-Type':'application/json;charset=UTF-8','Authorization':_0x53d277(0x1ec)+koyeb_api}};return await axios['get'](_0x53d277(0x1ee),_0x1ed3f3)['then'](_0xac8513=>{const _0x5041f1=_0x53d277;let _0x8a749b=[_0x5041f1(0x1eb),'STOPPING',_0x5041f1(0x206),_0x5041f1(0x1e0)],_0x3c277e=[];for(let _0x4b46f6=0x0;_0x4b46f6<_0xac8513[_0x5041f1(0x20d)][_0x5041f1(0x1e7)][_0x5041f1(0x202)];_0x4b46f6++){!_0x8a749b[_0x5041f1(0x1de)](_0xac8513['data'][_0x5041f1(0x1e7)][_0x4b46f6][_0x5041f1(0x1e2)])&&_0x3c277e[_0x5041f1(0x20e)](_0xac8513['data'][_0x5041f1(0x1e7)][_0x4b46f6][_0x5041f1(0x1e2)]);}if(_0x3c277e[_0x5041f1(0x202)]>0x1)status=_0x5041f1(0x1db);}),status;}function checkArray(_0x149cc0,_0x36c8d1){const _0x5a8a34=_0x236778;var _0x9799f0=![];for(var _0x48f94f=0x0;_0x48f94f<_0x149cc0['length'];_0x48f94f++){if(_0x149cc0[_0x48f94f][_0x5a8a34(0x1fa)]==_0x36c8d1){_0x9799f0=!![];break;}}return _0x9799f0;}async function delvar(_0x261637){const _0x3d44e5=_0x236778;var _0x2d91f6=![];let {data:_0x43cdc4}=await axios[_0x3d44e5(0x207)]('https://app.koyeb.com/v1/services',axiosConfig),_0x39e15d=_0x43cdc4[_0x3d44e5(0x1e9)][0x0]['id'],_0x395562=await axios[_0x3d44e5(0x207)]('https://app.koyeb.com/v1/deployments/'+_0x43cdc4['services'][0x0]['latest_deployment_id'],axiosConfig),_0x322706=checkArray(_0x395562[_0x3d44e5(0x20d)][_0x3d44e5(0x1f2)][_0x3d44e5(0x1dd)][_0x3d44e5(0x20c)],_0x261637);if(_0x322706!==!![])return _0x3d44e5(0x1da);let _0x28f7c4=[];for(var _0xf9a86b=0x0;_0xf9a86b<_0x395562[_0x3d44e5(0x20d)]['deployment'][_0x3d44e5(0x1dd)][_0x3d44e5(0x20c)][_0x3d44e5(0x202)];_0xf9a86b++){if(_0x395562[_0x3d44e5(0x20d)]['deployment']['definition'][_0x3d44e5(0x20c)][_0xf9a86b]['key']===_0x261637)continue;_0x28f7c4[_0x3d44e5(0x20e)](_0x395562[_0x3d44e5(0x20d)][_0x3d44e5(0x1f2)][_0x3d44e5(0x1dd)][_0x3d44e5(0x20c)][_0xf9a86b]);}let _0x1aadfc={'definition':{'name':_0x395562[_0x3d44e5(0x20d)]['deployment'][_0x3d44e5(0x1dd)][_0x3d44e5(0x1e8)],'routes':_0x395562[_0x3d44e5(0x20d)][_0x3d44e5(0x1f2)][_0x3d44e5(0x1dd)]['routes'],'ports':_0x395562[_0x3d44e5(0x20d)][_0x3d44e5(0x1f2)][_0x3d44e5(0x1dd)]['ports'],'env':_0x28f7c4,'regions':_0x395562[_0x3d44e5(0x20d)][_0x3d44e5(0x1f2)][_0x3d44e5(0x1dd)]['regions'],'scalings':_0x395562[_0x3d44e5(0x20d)][_0x3d44e5(0x1f2)][_0x3d44e5(0x1dd)][_0x3d44e5(0x1ed)],'instance_types':_0x395562[_0x3d44e5(0x20d)][_0x3d44e5(0x1f2)][_0x3d44e5(0x1dd)][_0x3d44e5(0x1e6)],'health_checks':_0x395562[_0x3d44e5(0x20d)]['deployment'][_0x3d44e5(0x1dd)][_0x3d44e5(0x204)],'git':_0x395562['data'][_0x3d44e5(0x1f2)]['definition'][_0x3d44e5(0x1f8)]}};return await axios[_0x3d44e5(0x1f4)](_0x3d44e5(0x201)+_0x39e15d,_0x1aadfc,axiosConfig)['then'](_0x1b9ad4=>{const _0x5716a2=_0x3d44e5;_0x1b9ad4[_0x5716a2(0x1e2)]===0xc8?_0x2d91f6=_0x5716a2(0x1e5)+_0x261637+_0x5716a2(0x210):_0x2d91f6=_0x5716a2(0x1f3);}),_0x2d91f6;}async function change_env(_0xd2f827){const _0x2bbab7=_0x236778;var _0x17c346=_0x2bbab7(0x1f3);let {data:_0x5691ee}=await axios[_0x2bbab7(0x207)](_0x2bbab7(0x203),axiosConfig),_0x4200f0=_0x5691ee[_0x2bbab7(0x1e9)][0x0]['id'],_0x476708=await axios[_0x2bbab7(0x207)](_0x2bbab7(0x1f7)+_0x5691ee[_0x2bbab7(0x1e9)][0x0][_0x2bbab7(0x200)],axiosConfig),_0x5caf77=_0xd2f827[_0x2bbab7(0x20f)](':'),_0x11abd0=[];for(var _0x1ad777=0x0;_0x1ad777<_0x476708[_0x2bbab7(0x20d)][_0x2bbab7(0x1f2)][_0x2bbab7(0x1dd)][_0x2bbab7(0x20c)][_0x2bbab7(0x202)];_0x1ad777++){_0x476708[_0x2bbab7(0x20d)]['deployment'][_0x2bbab7(0x1dd)][_0x2bbab7(0x20c)][_0x1ad777]['key']===_0x5caf77[0x0]?_0x11abd0[_0x2bbab7(0x20e)]({'scopes':[_0x2bbab7(0x20b)],'key':''+_0x5caf77[0x0],'value':''+_0x5caf77[0x1]}):_0x11abd0[_0x2bbab7(0x20e)](_0x476708[_0x2bbab7(0x20d)]['deployment'][_0x2bbab7(0x1dd)][_0x2bbab7(0x20c)][_0x1ad777]);}let _0x2089cd=checkArray(_0x11abd0,_0x5caf77[0x0]);!_0x2089cd===!![]&&_0x11abd0['push']({'scopes':['region:fra'],'key':''+_0x5caf77[0x0],'value':''+_0x5caf77[0x1]});let _0x1f5c81={'definition':{'name':_0x476708[_0x2bbab7(0x20d)][_0x2bbab7(0x1f2)][_0x2bbab7(0x1dd)][_0x2bbab7(0x1e8)],'routes':_0x476708[_0x2bbab7(0x20d)][_0x2bbab7(0x1f2)][_0x2bbab7(0x1dd)][_0x2bbab7(0x205)],'ports':_0x476708[_0x2bbab7(0x20d)][_0x2bbab7(0x1f2)][_0x2bbab7(0x1dd)]['ports'],'env':_0x11abd0,'regions':_0x476708[_0x2bbab7(0x20d)][_0x2bbab7(0x1f2)][_0x2bbab7(0x1dd)]['regions'],'scalings':_0x476708[_0x2bbab7(0x20d)]['deployment']['definition'][_0x2bbab7(0x1ed)],'instance_types':_0x476708['data']['deployment']['definition'][_0x2bbab7(0x1e6)],'health_checks':_0x476708[_0x2bbab7(0x20d)][_0x2bbab7(0x1f2)][_0x2bbab7(0x1dd)]['health_checks'],'git':_0x476708[_0x2bbab7(0x20d)][_0x2bbab7(0x1f2)]['definition'][_0x2bbab7(0x1f8)]}};return await axios[_0x2bbab7(0x1f4)]('https://app.koyeb.com/v1/services/'+_0x4200f0,_0x1f5c81,axiosConfig)[_0x2bbab7(0x1fb)](_0x4c5671=>{const _0x29ea81=_0x2bbab7;_0x4c5671[_0x29ea81(0x1e2)]===0xc8?_0x17c346=_0x29ea81(0x1f6)+_0x5caf77[0x0]+':'+_0x5caf77[0x1]+_0x29ea81(0x1e1):_0x17c346=_0x29ea81(0x1f3);}),_0x17c346;}async function getallvar(){const _0x4ede29=_0x236778;let {data:_0x119ec3}=await axios[_0x4ede29(0x207)](_0x4ede29(0x203),axiosConfig),_0xe31c4b=await axios['get'](_0x4ede29(0x1f7)+_0x119ec3[_0x4ede29(0x1e9)][0x0]['latest_deployment_id'],axiosConfig),_0x3c7cc1=[];for(var _0x462792=0x0;_0x462792<_0xe31c4b[_0x4ede29(0x20d)]['deployment'][_0x4ede29(0x1dd)]['env'][_0x4ede29(0x202)];_0x462792++){if(!_0xe31c4b[_0x4ede29(0x20d)][_0x4ede29(0x1f2)][_0x4ede29(0x1dd)][_0x4ede29(0x20c)][_0x462792]['key'])continue;_0x3c7cc1[_0x4ede29(0x20e)]('*'+_0xe31c4b['data']['deployment'][_0x4ede29(0x1dd)][_0x4ede29(0x20c)][_0x462792][_0x4ede29(0x1fa)]+_0x4ede29(0x209)+_0xe31c4b[_0x4ede29(0x20d)][_0x4ede29(0x1f2)]['definition']['env'][_0x462792][_0x4ede29(0x1fe)]+'_');}return _0x3c7cc1[_0x4ede29(0x211)]('\x0a');}async function getvar(_0x5454c2){const _0x2f0e0b=_0x236778;let {data:_0x46b2d9}=await axios[_0x2f0e0b(0x207)](_0x2f0e0b(0x203),axiosConfig),_0x4b69f3=await axios[_0x2f0e0b(0x207)](_0x2f0e0b(0x1f7)+_0x46b2d9['services'][0x0][_0x2f0e0b(0x200)],axiosConfig);for(var _0x27e516=0x0;_0x27e516<_0x4b69f3[_0x2f0e0b(0x20d)]['deployment'][_0x2f0e0b(0x1dd)][_0x2f0e0b(0x20c)]['length'];_0x27e516++){if(!_0x4b69f3[_0x2f0e0b(0x20d)][_0x2f0e0b(0x1f2)][_0x2f0e0b(0x1dd)][_0x2f0e0b(0x20c)][_0x27e516][_0x2f0e0b(0x1fa)])continue;if(_0x4b69f3[_0x2f0e0b(0x20d)][_0x2f0e0b(0x1f2)][_0x2f0e0b(0x1dd)]['env'][_0x27e516][_0x2f0e0b(0x1fa)]===_0x5454c2)return _0x4b69f3[_0x2f0e0b(0x20d)][_0x2f0e0b(0x1f2)][_0x2f0e0b(0x1dd)][_0x2f0e0b(0x20c)][_0x27e516]['key']+':'+_0x4b69f3['data'][_0x2f0e0b(0x1f2)][_0x2f0e0b(0x1dd)][_0x2f0e0b(0x20c)][_0x27e516][_0x2f0e0b(0x1fe)];}}async function redeploy(){const _0x479dbd=_0x236778;var _0x1b95a3=![],_0x49b950={'deployment_group':'prod','sha':''};let {data:_0xfc686b}=await axios[_0x479dbd(0x207)]('https://app.koyeb.com/v1/services',axiosConfig),_0x2a55f6=_0xfc686b['services'][0x0]['id'];try{let _0x5b65a1=await axios[_0x479dbd(0x1dc)](_0x479dbd(0x201)+_0x2a55f6+'/redeploy',_0x49b950,axiosConfig);_0x1b95a3=_0x479dbd(0x1f9);}catch(_0x448724){_0x1b95a3='*Got\x20an\x20error\x20in\x20redeploying.*\x0a*Please\x20put\x20koyeb\x20api\x20key\x20in\x20var\x20KOYEB_API.*\x0a_Eg:\x20KOYEB_API:api\x20key\x20from\x20https://app.koyeb.com/account/api\x20._';}return _0x1b95a3;}function _0x5365(_0x1c795e,_0x13839f){const _0x5d8804=_0x5d88();return _0x5365=function(_0x5365cd,_0xdbff44){_0x5365cd=_0x5365cd-0x1da;let _0x47dc38=_0x5d8804[_0x5365cd];return _0x47dc38;},_0x5365(_0x1c795e,_0x13839f);}module['exports']={'redeploy':redeploy,'getvar':getvar,'delvar':delvar,'getallvar':getallvar,'change_env':change_env,'get_deployments':get_deployments};
